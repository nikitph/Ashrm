{% extends "crudtemplate.html" %}
{% from 'macros.html' import renderer %}

{% block script %}
    <script>
        function copyTextValue() {
            var text1 = document.getElementById("student_id").value;
            var url1 = '/student?m=r';
            {% if mode==2 or mode==3 %}

                document.getElementById("backlink").href = url1 + '&id=' + text1;

            {% endif %}
        }
        $(document).ready(function () {
            $('select').material_select();
            copyTextValue();
        });


    </script>

    <script type="text/javascript" charset="utf-8">
        function activateSlave(sel) {

            var key = sel.value;
            $('#room').find('option').removeAttr('disabled');


            $.ajax({
                type: "GET",
                dataType: 'json',
                accepts: "application/json; charset=utf-8",
                url: 'http://127.0.0.1:5001/hostelroom?where={"hostel": "' + key + '"}',
                success: function (data) {
                    var d = '';

                    for (var i = 0; i < data._items.length; i++) {
                        var b = data._items[i];
                        var c = b._id;
                        d += 'option[value!="' + c + '"]';
                    }
                        $('#room').removeAttr('disabled');
                        $('select').material_select();
                        $('#room').find(d).attr('disabled', 'disabled');
                        $('select').material_select();


                    }


            });

        }
    </script>


{% endblock %}

{% block uiblock %}

    {% if mode==1 %}

        <div class="chip amber lighten-3">
            <div class="img2 center"><i class="material-icons black-text">keyboard_arrow_right</i></div>
            Create {{ displayname }}
        </div>
        <div class="line-linkage activelink"></div>


    {% endif %}

    {% if mode==2 %}

        <div class="chip green lighten-3">
            <div class="img2 center"><i class="material-icons black-text">keyboard_arrow_right</i></div>
            View {{ displayname }}
        </div>
        <div class="line-linkage activelink"></div>

        <div class="vertical-line"></div>
        <div class="chip green lighten-3">
            <div class="img2 center"><i class="material-icons black-text">keyboard_arrow_right</i></div>
            <a href="{{ url_for('.' + routename,m='u', id=request.args.get('id') , sid=request.args.get('sid')) }}">Update {{ displayname }}</a>
        </div>

        <div class="line-linkage"></div>


        <div class="vertical-line"></div>
        <div class="chip red lighten-2">
            <div class="img2 center"><i class="material-icons black-text">keyboard_arrow_right</i></div>
            <a href="{{ url_for('.' + routename,m='d', id=request.args.get('id'), sid=request.args.get('sid')) }}">Delete
                {{ displayname }} </a>
        </div>
        <div class="line-linkage"></div>

        <div class="vertical-line"></div>
        <div class="chip blue">
            <a id="backlink" href=""> < Back to Student </a>
        </div>


    {% endif %}

    {% if mode==3 %}

        <div class="chip green lighten-3">
            <div class="img2 center"><i class="material-icons black-text">keyboard_arrow_right</i></div>
            <a href="{{ url_for('.' + routename,m='r', id=request.args.get('id'), sid=request.args.get('sid')) }}">View {{ displayname }}</a>
        </div>
        <div class="line-linkage"></div>

        <div class="vertical-line"></div>
        <div class="chip green lighten-3">
            <div class="img2 center"><i class="material-icons black-text">keyboard_arrow_right</i></div>
            <a href="{{ url_for('.' + routename,m='u', id=request.args.get('id'), sid=request.args.get('sid')) }}">Update {{ displayname }}</a>
        </div>

        <div class="line-linkage activelink"></div>


        <div class="vertical-line"></div>
        <div class="chip red lighten-2">
            <div class="img2 center"><i class="material-icons black-text">keyboard_arrow_right</i></div>
            <a href="{{ url_for('.' + routename,m='d', id=request.args.get('id'), sid=request.args.get('sid')) }}"> Delete
                {{ displayname }} </a>
        </div>
        <div class="line-linkage"></div>

        <div class="vertical-line"></div>
        <div class="chip blue">
            <a id="backlink" href=""> < Back to Student </a>
        </div>

    {% endif %}

    {% if mode==4 %}

        <div class="chip amber lighten-3">
            <div class="img2 center"><i class="material-icons black-text">keyboard_arrow_right</i></div>
            Delete {{ displayname }}
        </div>
        <div class="line-linkage activelink"></div>

        <div class="vertical-line"></div>
        <div class="chip white">
            <a id="backlink" href=""> < Back to Student </a>
        </div>

    {% endif %}

{% endblock %}


{% block create_mode %}

    <div class="row">
        {% for h in form %}

            {% if h.label.text == 'Student Id' %}

                {{ h(value=key_id) }}

            {% elif h.label.text =='Stop' %}
                <div class="input-field col s12 m6">
                    {{ h(disabled='') }}
                    {{ h.label() }}

                </div>


            {% else %}

                {{ renderer(h, mode) }}

            {% endif %}
        {% endfor %}
    </div>


    <div class="row center">
        <button class="btn white black-text btp"
                type="submit" style="margin-bottom: -55px"
        >Submit
            <i class="material-icons right blue-text">send</i>
        </button>

    </div>

{% endblock %}

{% block read_mode %}

    <div class="row">
        {% for h in form %}
            {{ renderer(h, mode) }}

        {% endfor %}
    </div>


{% endblock %}

{% block update_mode %}

    <div class="row">

        <input id="id" name="id" type="hidden" value={{ request.args.get('id') }}>

        {% for h in form %}

            {{ renderer(h, mode) }}

        {% endfor %}
    </div>

    <div class="row center">
        <button class="btn white black-text btp"
                type="submit" style="margin-bottom: -55px"
        >Submit
            <i class="material-icons right blue-text">send</i>
        </button>

    </div>


{% endblock %}

{% block delete_mode %}
    <div class="center">

        <div>
            <div class="completed"><br>
                <br><br><br><br> {{ displayname }} Successfully Deleted <br>
                <i class="material-icons large green-text">done</i>
                <br><br><br><br>
            </div>
        </div>

    </div>

{% endblock %}